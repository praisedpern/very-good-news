(this["webpackJsonpvery-good-news"]=this["webpackJsonpvery-good-news"]||[]).push([[0],{29:function(t,e,c){},48:function(t,e,c){},50:function(t,e,c){"use strict";c.r(e);var n=c(1),s=c.n(n),a=c(23),r=c.n(a),o=(c(29),c(11)),i=c(3),j=c(4),l=c(2),b=c(14).default.create({baseURL:"https://very-good-news.herokuapp.com/api",params:{token:"VNuzbRlq0rvXhE0798pNmbYvhR1lhxE7P/nJokOkoac="}}),u=(c(48),c(0)),p=function(){return Object(u.jsx)("header",{className:"App-title",children:Object(u.jsxs)(j.b,{to:"/",children:[Object(u.jsx)("h1",{children:"Very Good"}),Object(u.jsx)("h2",{children:"News & Commentary Co."})]})})},d=function(t){var e=t.topics,c=Object(n.useState)(!0),s=Object(i.a)(c,2),a=s[0],r=s[1];return Object(u.jsxs)("div",{className:"Dropdown",children:[Object(u.jsx)(j.b,{to:"/topics",onClick:function(){r((function(){return!a}))},className:"Dropdown-title",children:"Topics"}),Object(u.jsx)("div",{className:"Dropdown-items",children:e.map((function(t){return Object(u.jsx)(j.b,{to:"/topics/"+t.slug,className:"Dropdown-item",children:t.slug},t.slug)}))})]})},m=function(t){var e=t.topics;return Object(u.jsxs)("nav",{className:"App-nav",children:[Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(d,{topics:e})}),Object(u.jsx)(j.b,{to:"/articles",children:"Articles"}),Object(u.jsx)(j.b,{to:"/comments",children:"Comments"})]})},O=c(24),h=function(){var t=Object(n.useState)({created_at:!0,comment_count:!1,votes:!1}),e=Object(i.a)(t,2),c=e[0],s=e[1],a=Object(n.useState)(Object.keys(c)[0]),r=Object(i.a)(a,2),o=r[0],l=r[1],b=Object(j.c)({}),p=Object(i.a)(b,2),d=(p[0],p[1]),m=function(t){l(t),s((function(e){var c=Object(O.a)({},e);for(var n in c)c[n]=!1;return c[t]=!0,c}))};return Object(u.jsxs)("section",{className:"App-sorter",children:["Sort by",Object(u.jsx)("input",{name:"sort_by",value:"created_at",type:"radio",checked:c.created_at,onChange:function(){m("created_at")}}),Object(u.jsx)("label",{htmlFor:"created_at",children:"created_at"}),Object(u.jsx)("input",{name:"sort_by",value:"comment_count",type:"radio",checked:c.comment_count,onChange:function(){m("comment_count")}}),Object(u.jsx)("label",{htmlFor:"comment_count",children:"comment_count"}),Object(u.jsx)("input",{name:"sort_by",value:"votes",type:"radio",checked:c.votes,onChange:function(){m("votes")}}),Object(u.jsx)("label",{htmlFor:"votes",children:"votes "}),Object(u.jsx)("button",{onClick:function(){d({sort_by:o,order:"asc"})},children:"Asc"})," ",Object(u.jsx)("button",{onClick:function(){d({sort_by:o,order:"desc"})},children:"Desc"})]})},x=function(t){var e=t.user;return Object(u.jsxs)("section",{className:"App-votebar-usercard",children:[Object(u.jsx)("img",{alt:"User avatar ",src:"https://media.gq.com/photos/5582cbcb1177d66d68d5912d/master/pass/entertainment-2011-08-mustache-nick-offerman-mustache-96.jpg"}),Object(u.jsx)("p",{children:e})]})},f=c(14).default.create({baseURL:"https://very-good-news.herokuapp.com/api",params:{token:"VNuzbRlq0rvXhE0798pNmbYvhR1lhxE7P/nJokOkoac="}}),v=function(t){var e=t.props,c=Object(n.useState)(0),s=Object(i.a)(c,2),a=s[0],r=s[1],o=Object(n.useState)(!0),l=Object(i.a)(o,2),b=l[0],p=l[1],d=Object(n.useState)(!0),m=Object(i.a)(d,2),O=m[0],h=m[1],v=Object(n.useState)(""),g=Object(i.a)(v,2),_=g[0],N=g[1],A=function(t){var c,n;e.article_id?(n="articles",c=e.article_id):(n="comments",c=e.comment_id),function(t,e){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"articles";f.patch("/".concat(c,"/").concat(t),{inc_votes:e}).then((function(e){var n=e.data;return console.log("PATCH /".concat(c,"/").concat(t)),n[c]}))}(c,t,n),r((function(e){return e+t}))};return Object(n.useEffect)((function(){p((function(){return 1!==a})),h((function(){return-1!==a}))}),[a]),Object(n.useEffect)((function(){if(e.topic)return N("in ".concat(e.topic))}),[e.topic]),Object(u.jsxs)("section",{className:"App-votebar",children:[Object(u.jsx)("h3",{className:"App-votebar-title",children:Object(u.jsx)(j.b,{to:"/articles/".concat(e.article_id),children:e.title})}),Object(u.jsx)(x,{user:e.author}),Object(u.jsxs)("div",{className:"App-votebar-votepanel",children:[Object(u.jsx)("button",{className:"App-votebar-plusbutton",disabled:!b,onClick:function(){return A(1)},children:"+"}),Object(u.jsxs)("p",{className:"App-votebar-votes",children:["votes: ",e.votes+a]}),Object(u.jsx)("button",{className:"App-votebar-minusbutton",disabled:!O,onClick:function(){return A(-1)},children:"-"})]}),Object(u.jsxs)("p",{className:"App-votebar-timestamp",children:["posted at ",e.created_at,Object(u.jsx)(j.b,{to:"/topics/".concat(e.topic),children:_})]})]})},g=function(t){var e=t.comment;return Object(u.jsxs)("section",{className:"App-comment-card",children:[Object(u.jsx)(v,{props:e}),Object(u.jsx)("p",{className:"App-comment-body",children:e.body})]})},_=c(13),N=function(t){var e=t.article,c=t.renderComments,n=Object(_.useState)([]),s=Object(i.a)(n,2),a=s[0],r=s[1];return Object(_.useEffect)((function(){var t;c&&(t=e.article_id,b.get("/articles/".concat(t,"/comments")).then((function(t){var e=t.data;return console.log("GET /articles/:article_id/comments"),e.comments}))).then((function(t){r(t)}))}),[e.article_id,c]),Object(u.jsxs)("section",{className:"App-article-card",children:[Object(u.jsx)(v,{props:e}),Object(u.jsx)("p",{className:"App-article-body",children:e.body}),a.map((function(t){return c?Object(u.jsx)(g,{comment:t},"comment".concat(t.comment_id)):null}))]})},A=function(t){var e=t.topic,c=Object(n.useState)([]),s=Object(i.a)(c,2),a=s[0],r=s[1],j=Object(l.g)().article_id,p=Object(n.useState)(!1),d=Object(i.a)(p,2),m=d[0],O=d[1],h=Object(l.e)().search;return Object(n.useEffect)((function(){var t;j?(t=j,b.get("/articles/".concat(t)).then((function(e){var c=e.data;return console.log("GET /articles/".concat(t)),c.article}))).then((function(t){r([t]),O(!0)})):function(t){return b.get("/articles".concat(t)).then((function(t){var e=t.data;return console.log("GET /articles"),e.articles}))}(h).then((function(t){r(Object(o.a)(t)),O(!1)}))}),[j,r,O,h]),Object(u.jsx)(u.Fragment,{children:a.map((function(t){return e&&t.topic!==e?null:Object(u.jsx)(N,{article:t,renderComments:m,setRenderComments:O},"article".concat(t.article_id))}))})},y=function(t){return t.topics.map((function(t){return Object(u.jsx)(j.b,{className:"App-all-topics",to:"/topics/"+t.slug,children:t.slug},"all-topics-"+t.slug)}))};var k=function(){var t=Object(n.useState)([]),e=Object(i.a)(t,2),c=e[0],s=e[1];return Object(n.useEffect)((function(){b.get("/topics").then((function(t){var e=t.data;return console.log("GET /topics"),e.topics})).then((function(t){s(Object(o.a)(t))}))}),[]),Object(u.jsx)(j.a,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("div",{className:"App-header",children:[Object(u.jsx)(p,{}),Object(u.jsx)(m,{topics:c})]}),Object(u.jsx)(h,{}),Object(u.jsx)("main",{className:"App-main",children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"/topics",element:Object(u.jsx)(y,{topics:c})}),Object(u.jsx)(l.a,{path:"/",element:Object(u.jsx)(A,{})}),Object(u.jsx)(l.a,{path:"/articles",element:Object(u.jsx)(A,{})}),c.map((function(t){return Object(u.jsx)(l.a,{path:"/topics/".concat(t.slug),element:Object(u.jsx)(A,{topic:t.slug})},"topicRoute-"+t.slug)})),Object(u.jsx)(l.a,{path:"/articles/:article_id",element:Object(u.jsx)(A,{})})]})})]})})},C=Object(n.createContext)(),S=function(t){var e=t.children,c=Object(n.useState)(""),s=Object(i.a)(c,2),a=s[0],r=s[1],o=Object(n.useState)([]),j=Object(i.a)(o,2),l=j[0],b=j[1];return Object(u.jsx)(C.Provider,{value:{currentUser:a,setCurrentUser:r,allUsers:l,setAllUsers:b},children:e})};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(S,{children:Object(u.jsx)(k,{})})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.0023e9b7.chunk.js.map