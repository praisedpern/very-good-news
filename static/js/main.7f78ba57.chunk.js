(this["webpackJsonpvery-good-news"]=this["webpackJsonpvery-good-news"]||[]).push([[0],{28:function(t,e,c){},47:function(t,e,c){},49:function(t,e,c){"use strict";c.r(e);var n=c(1),s=c.n(n),r=c(23),a=c.n(r),o=(c(28),c(11)),i=c(3),j=c(4),l=c(2),b=c(14).default.create({baseURL:"https://very-good-news.herokuapp.com/api",params:{token:"VNuzbRlq0rvXhE0798pNmbYvhR1lhxE7P/nJokOkoac="}}),u=(c(47),c(0)),p=function(){return Object(u.jsx)("header",{className:"App-title",children:Object(u.jsxs)(j.b,{to:"/",children:[Object(u.jsx)("h1",{children:"Very Good"}),Object(u.jsx)("h2",{children:"News & Commentary Co."})]})})},d=function(t){var e=t.topics,c=Object(n.useState)(!0),s=Object(i.a)(c,2),r=s[0],a=s[1];return Object(u.jsxs)("div",{className:"Dropdown",children:[Object(u.jsx)(j.b,{to:"/topics",onClick:function(){a((function(){return!r}))},className:"Dropdown-title",children:"Topics"}),Object(u.jsx)("div",{className:"Dropdown-items",children:e.map((function(t){return Object(u.jsx)(j.b,{to:"/topics/"+t.slug,className:"Dropdown-item",children:t.slug},t.slug)}))})]})},m=function(t){var e=t.topics;return Object(u.jsxs)("nav",{className:"App-nav",children:[Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(d,{topics:e})}),Object(u.jsx)(j.b,{to:"/articles",children:"Articles"}),Object(u.jsx)(j.b,{to:"/comments",children:"Comments"})]})},O=function(){return Object(u.jsxs)("section",{className:"App-sorter",children:["Sort by",Object(u.jsx)("input",{name:"sort_by",value:"created_at",type:"radio"}),Object(u.jsx)("label",{htmlFor:"created_at",children:"created_at"}),Object(u.jsx)("input",{name:"sort_by",value:"comment_count",type:"radio"}),Object(u.jsx)("label",{htmlFor:"comment_count",children:"comment_count"}),Object(u.jsx)("input",{name:"sort_by",value:"votes",type:"radio"}),Object(u.jsx)("label",{htmlFor:"votes",children:"votes "}),Object(u.jsx)("button",{children:"Asc"})," ",Object(u.jsx)("button",{children:"Desc"})]})},h=function(t){var e=t.user;return Object(u.jsxs)("section",{className:"App-votebar-usercard",children:[Object(u.jsx)("img",{alt:"User avatar ",src:"https://media.gq.com/photos/5582cbcb1177d66d68d5912d/master/pass/entertainment-2011-08-mustache-nick-offerman-mustache-96.jpg"}),Object(u.jsx)("p",{children:e})]})},x=c(14).default.create({baseURL:"https://very-good-news.herokuapp.com/api",params:{token:"VNuzbRlq0rvXhE0798pNmbYvhR1lhxE7P/nJokOkoac="}}),v=function(t){var e=t.props,c=Object(n.useState)(0),s=Object(i.a)(c,2),r=s[0],a=s[1],o=Object(n.useState)(!0),l=Object(i.a)(o,2),b=l[0],p=l[1],d=Object(n.useState)(!0),m=Object(i.a)(d,2),O=m[0],v=m[1],f=function(t){var c,n;e.article_id?(n="articles",c=e.article_id):(n="comments",c=e.comment_id),function(t,e){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"articles";x.patch("/".concat(c,"/").concat(t),{inc_votes:e}).then((function(e){var n=e.data;return console.log("PATCH /".concat(c,"/").concat(t)),n[c]}))}(c,t,n),a((function(e){return e+t}))};return Object(n.useEffect)((function(){p((function(){return 1!==r})),v((function(){return-1!==r}))}),[r]),Object(u.jsxs)("section",{className:"App-votebar",children:[Object(u.jsx)("h3",{className:"App-votebar-title",children:Object(u.jsx)(j.b,{to:"/articles/".concat(e.article_id),children:e.title})}),Object(u.jsx)(h,{user:e.author}),Object(u.jsx)("button",{className:"App-votebar-plusbutton",disabled:!b,onClick:function(){return f(1)},children:"+"}),Object(u.jsxs)("p",{className:"App-votebar-votes",children:["votes: ",e.votes+r]}),Object(u.jsx)("button",{className:"App-votebar-minusbutton",disabled:!O,onClick:function(){return f(-1)},children:"-"}),Object(u.jsxs)("p",{className:"App-votebar-timestamp",children:["posted at ",e.created_at," in",Object(u.jsx)(j.b,{to:"/topics/".concat(e.topic),children:e.topic})]})]})},f=function(t){var e=t.comment;return Object(u.jsxs)("section",{className:"App-comment-card",children:[Object(u.jsx)(v,{props:e}),Object(u.jsx)("p",{className:"App-comment-body",children:e.body})]})},g=c(13),N=function(t){var e=t.article,c=t.renderComments,n=Object(g.useState)([]),s=Object(i.a)(n,2),r=s[0],a=s[1];return Object(g.useEffect)((function(){var t;c&&(t=e.article_id,b.get("/articles/".concat(t,"/comments")).then((function(t){var e=t.data;return console.log("GET /articles/:article_id/comments"),e.comments}))).then((function(t){a(t)}))}),[e.article_id,c]),Object(u.jsxs)("section",{className:"App-article-card",children:[Object(u.jsx)(v,{props:e}),Object(u.jsx)("p",{className:"App-article-body",children:e.body}),r.map((function(t){return c?Object(u.jsx)(f,{comment:t},"comment".concat(t.comment_id)):null}))]})},_=function(t){var e=t.topic,c=Object(n.useState)([]),s=Object(i.a)(c,2),r=s[0],a=s[1],j=Object(l.g)().article_id,p=Object(n.useState)(!1),d=Object(i.a)(p,2),m=d[0],O=d[1];return Object(n.useEffect)((function(){var t;j?(t=j,b.get("/articles/".concat(t)).then((function(e){var c=e.data;return console.log("GET /articles/".concat(t)),c.article}))).then((function(t){a([t]),O(!0)})):b.get("/articles").then((function(t){var e=t.data;return console.log("GET /articles"),e.articles})).then((function(t){a(Object(o.a)(t)),O(!1)}))}),[j,a,O]),Object(u.jsx)(u.Fragment,{children:r.map((function(t){return e&&t.topic!==e?null:Object(u.jsx)(N,{article:t,renderComments:m,setRenderComments:O},"article".concat(t.article_id))}))})},A=function(t){return t.topics.map((function(t){return Object(u.jsx)(j.b,{to:"/topics/"+t.slug,children:t.slug},"all-topics-"+t.slug)}))};var y=function(){var t=Object(n.useState)([]),e=Object(i.a)(t,2),c=e[0],s=e[1];return Object(n.useEffect)((function(){b.get("/topics").then((function(t){var e=t.data;return console.log("GET /topics"),e.topics})).then((function(t){s(Object(o.a)(t))}))}),[]),Object(u.jsx)(j.a,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("div",{className:"App-header",children:[Object(u.jsx)(p,{}),Object(u.jsx)(m,{topics:c})]}),Object(u.jsx)(O,{}),Object(u.jsx)("main",{className:"App-main",children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"/topics",element:Object(u.jsx)(A,{topics:c})}),Object(u.jsx)(l.a,{path:"/",element:Object(u.jsx)(_,{})}),Object(u.jsx)(l.a,{path:"/articles",element:Object(u.jsx)(_,{})}),c.map((function(t){return Object(u.jsx)(l.a,{path:"/topics/".concat(t.slug),element:Object(u.jsx)(_,{topic:t.slug})},"topicRoute-"+t.slug)})),Object(u.jsx)(l.a,{path:"/articles/:article_id",element:Object(u.jsx)(_,{})})]})})]})})},k=Object(n.createContext)(),E=function(t){var e=t.children,c=Object(n.useState)(""),s=Object(i.a)(c,2),r=s[0],a=s[1],o=Object(n.useState)([]),j=Object(i.a)(o,2),l=j[0],b=j[1];return Object(u.jsx)(k.Provider,{value:{currentUser:r,setCurrentUser:a,allUsers:l,setAllUsers:b},children:e})};a.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(E,{children:Object(u.jsx)(y,{})})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.7f78ba57.chunk.js.map