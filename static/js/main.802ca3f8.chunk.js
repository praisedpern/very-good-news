(this["webpackJsonpvery-good-news"]=this["webpackJsonpvery-good-news"]||[]).push([[0],{29:function(e,t,c){},48:function(e,t,c){},50:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(23),r=c.n(a),o=(c(29),c(11)),i=c(3),j=c(4),l=c(2),b=c(13).default.create({baseURL:"https://very-good-news.herokuapp.com/api",params:{token:"VNuzbRlq0rvXhE0798pNmbYvhR1lhxE7P/nJokOkoac="}}),u=(c(48),c(0)),p=function(){return Object(u.jsx)("header",{className:"App-title",children:Object(u.jsxs)(j.b,{to:"/",children:[Object(u.jsx)("h1",{children:"Very Good"}),Object(u.jsx)("h2",{children:"News & Commentary Co."})]})})},d=function(e){var t=e.topics,c=Object(n.useState)(!0),s=Object(i.a)(c,2),a=s[0],r=s[1];return Object(u.jsxs)("div",{className:"Dropdown",children:[Object(u.jsx)(j.b,{to:"/topics",onClick:function(){r((function(){return!a}))},className:"Dropdown-title",children:"Topics"}),Object(u.jsx)("div",{className:"Dropdown-items",children:t.map((function(e){return Object(u.jsx)(j.b,{to:"/topics/"+e.slug,className:"Dropdown-item",children:e.slug},e.slug)}))})]})},m=function(e){var t=e.topics;return Object(u.jsxs)("nav",{className:"App-nav",children:[Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(d,{topics:t})}),Object(u.jsx)(j.b,{to:"/articles",children:"Articles"}),Object(u.jsx)(j.b,{to:"/comments",children:"Comments"})]})},O=c(24),h=function(){var e=Object(n.useState)({created_at:!0,comment_count:!1,votes:!1}),t=Object(i.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(Object.keys(c)[0]),r=Object(i.a)(a,2),o=r[0],l=r[1],b=Object(j.c)({}),p=Object(i.a)(b,2),d=(p[0],p[1]),m=function(e){l(e),s((function(t){var c=Object(O.a)({},t);for(var n in c)c[n]=!1;return c[e]=!0,c}))};return Object(u.jsxs)("section",{className:"App-sorter",children:["Sort by",Object(u.jsx)("input",{name:"sort_by",value:"created_at",type:"radio",checked:c.created_at,onChange:function(){m("created_at")}}),Object(u.jsx)("label",{htmlFor:"created_at",children:"created_at"}),Object(u.jsx)("input",{name:"sort_by",value:"comment_count",type:"radio",checked:c.comment_count,onChange:function(){m("comment_count")}}),Object(u.jsx)("label",{htmlFor:"comment_count",children:"comment_count"}),Object(u.jsx)("input",{name:"sort_by",value:"votes",type:"radio",checked:c.votes,onChange:function(){m("votes")}}),Object(u.jsx)("label",{htmlFor:"votes",children:"votes "}),Object(u.jsx)("button",{onClick:function(){d({sort_by:o,order:"asc"})},children:"Asc"})," ",Object(u.jsx)("button",{onClick:function(){d({sort_by:o,order:"desc"})},children:"Desc"})]})},x=function(e){var t=e.user;return Object(u.jsxs)("section",{className:"App-votebar-usercard",children:[Object(u.jsx)("img",{alt:"User avatar ",src:"https://media.gq.com/photos/5582cbcb1177d66d68d5912d/master/pass/entertainment-2011-08-mustache-nick-offerman-mustache-96.jpg"}),Object(u.jsx)("p",{children:t})]})},f=c(13).default.create({baseURL:"https://very-good-news.herokuapp.com/api",params:{token:"VNuzbRlq0rvXhE0798pNmbYvhR1lhxE7P/nJokOkoac="}}),v=function(e){var t=e.props,c=Object(n.useState)(0),s=Object(i.a)(c,2),a=s[0],r=s[1],o=Object(n.useState)(!0),l=Object(i.a)(o,2),b=l[0],p=l[1],d=Object(n.useState)(!0),m=Object(i.a)(d,2),O=m[0],h=m[1],x=Object(n.useState)(""),v=Object(i.a)(x,2),N=v[0],g=v[1],y=function(e){var c,n;t.article_id?(n="articles",c=t.article_id):(n="comments",c=t.comment_id),function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"articles";f.patch("/".concat(c,"/").concat(e),{inc_votes:t}).then((function(e){return e.data[c]}))}(c,e,n),r((function(t){return t+e}))};return Object(n.useEffect)((function(){p((function(){return 1!==a})),h((function(){return-1!==a}))}),[a]),Object(n.useEffect)((function(){if(t.topic)return g("in ".concat(t.topic))}),[t.topic]),Object(u.jsxs)("section",{className:"App-votebar",children:[Object(u.jsx)("h3",{className:"App-votebar-title",children:Object(u.jsx)(j.b,{to:"/articles/".concat(t.article_id),children:t.title})}),Object(u.jsxs)("p",{className:"App-votebar-timestamp",children:["posted at ",t.created_at,Object(u.jsx)(j.b,{to:"/topics/".concat(t.topic),children:N})]}),Object(u.jsxs)("div",{className:"App-votebar-votepanel",children:[Object(u.jsx)("button",{className:"App-votebar-plusbutton",disabled:!b,onClick:function(){return y(1)},children:"+"}),Object(u.jsxs)("p",{className:"App-votebar-votes",children:["votes: ",t.votes+a]}),Object(u.jsx)("button",{className:"App-votebar-minusbutton",disabled:!O,onClick:function(){return y(-1)},children:"-"})]})]})},N=function(e){var t=e.comment;return Object(u.jsxs)("section",{className:"App-comment-card",children:[Object(u.jsx)(v,{props:t}),Object(u.jsxs)("div",{className:"App-article-body-container",children:[Object(u.jsx)("p",{className:"App-comment-body",children:t.body}),Object(u.jsx)(x,{user:t.author})]})]})},g=c(14),y=c(13).default.create({baseURL:"https://very-good-news.herokuapp.com/api",params:{token:"VNuzbRlq0rvXhE0798pNmbYvhR1lhxE7P/nJokOkoac="}}),_=Object(n.createContext)(),A=function(e){var t=e.children,c=Object(n.useState)("tickle122"),s=Object(i.a)(c,2),a=s[0];s[1];return Object(u.jsx)(_.Provider,{value:{currentUser:a},children:t})},k=function(e){var t=e.article,c=e.renderComments,s=Object(n.useState)(""),a=Object(i.a)(s,2),r=a[0],o=a[1],j=Object(n.useContext)(_).currentUser,l=Object(n.useState)({display:"none"}),b=Object(i.a)(l,2),p=b[0],d=b[1];return Object(n.useEffect)((function(){return d(c?{display:"visible"}:{display:"none"})}),[c]),console.log(p),Object(u.jsxs)("section",{style:p,className:"App-comment-box-container",children:[Object(u.jsx)(x,{className:"App-current-user-card",user:j}),Object(u.jsxs)("div",{className:"App-comment-input",children:[Object(u.jsx)("textarea",{className:"App-comment-body",name:"comment-to-post",value:r,onChange:function(e){return e.preventDefault(),o(e.target.value)},rows:"6",cols:"80"}),Object(u.jsx)("button",{onClick:function(){var e,c,n;return e=t.article_id,c=j,n=r,y.post("/articles/".concat(e,"/comments"),{username:c,body:n}).then((function(e){return e.data[0]})),o("")},children:"Post"})]})]})},C=function(e){var t=e.article,c=e.renderComments,n=Object(g.useState)([]),s=Object(i.a)(n,2),a=s[0],r=s[1];return Object(g.useEffect)((function(){var e;c&&(e=t.article_id,b.get("/articles/".concat(e,"/comments")).then((function(e){return e.data.comments}))).then((function(e){r(e)}))}),[t.article_id,c]),Object(u.jsxs)("section",{className:"App-article-card",children:[Object(u.jsx)(v,{props:t}),Object(u.jsxs)("div",{className:"App-article-body-container",children:[Object(u.jsx)("p",{className:"App-article-body",children:t.body}),Object(u.jsx)(x,{user:t.author})]}),a.map((function(e){return c?Object(u.jsx)(N,{comment:e},"comment".concat(e.comment_id)):null})),Object(u.jsx)(k,{article:t,renderComments:c})]})},S=function(e){var t=e.topic,c=Object(n.useState)([]),s=Object(i.a)(c,2),a=s[0],r=s[1],j=Object(l.g)().article_id,p=Object(n.useState)(!1),d=Object(i.a)(p,2),m=d[0],O=d[1],h=Object(l.e)().search;return Object(n.useEffect)((function(){var e;j?(e=j,b.get("/articles/".concat(e)).then((function(e){return e.data.article}))).then((function(e){r([e]),O(!0)})):function(e){return b.get("/articles".concat(e)).then((function(e){return e.data.articles}))}(h).then((function(e){r(Object(o.a)(e)),O(!1)}))}),[j,r,O,h]),Object(u.jsx)(u.Fragment,{children:a.map((function(e){return t&&e.topic!==t?null:Object(u.jsx)(C,{article:e,renderComments:m,setRenderComments:O},"article".concat(e.article_id))}))})},w=function(e){return e.topics.map((function(e){return Object(u.jsx)(j.b,{className:"App-all-topics",to:"/topics/"+e.slug,children:e.slug},"all-topics-"+e.slug)}))};var E=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){b.get("/topics").then((function(e){return e.data.topics})).then((function(e){s(Object(o.a)(e))}))}),[]),Object(u.jsx)(j.a,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("div",{className:"App-header",children:[Object(u.jsx)(p,{}),Object(u.jsx)(m,{topics:c})]}),Object(u.jsx)(h,{}),Object(u.jsx)("main",{className:"App-main",children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"/topics",element:Object(u.jsx)(w,{topics:c})}),Object(u.jsx)(l.a,{path:"/",element:Object(u.jsx)(S,{})}),Object(u.jsx)(l.a,{path:"/articles",element:Object(u.jsx)(S,{})}),c.map((function(e){return Object(u.jsx)(l.a,{path:"/topics/".concat(e.slug),element:Object(u.jsx)(S,{topic:e.slug})},"topicRoute-"+e.slug)})),Object(u.jsx)(l.a,{path:"/articles/:article_id",element:Object(u.jsx)(S,{})})]})})]})})};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(A,{children:Object(u.jsx)(E,{})})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.802ca3f8.chunk.js.map